<!DOCTYPE html>
<html>
<head>
  <!-- Import Vega & Vega-Lite (does not have to be from CDN) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>
  
  
  <!-- CSS file -->
  <link rel="stylesheet" type="text/css" href="css/styles.css" media="all">
  
</head>
<body>
  
<div id="scatter_plot"></div>

<script type="text/javascript">

  var spec2 = 
  {
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "A scatterplot showing the relationship between the ranking and average score of anime series, filtered by genre.",
    "data": {
      "url": "animes.csv"
    },
    "transform": [
      {
        "filter": "datum.ranked > 0 && datum.score > 0"
      }
    ],
    "mark": "point",
    "encoding": {
      "x": {
        "field": "ranked",
        "type": "quantitative",
        "title": "Ranking"
      },
      "y": {
        "field": "score",
        "type": "quantitative",
        "title": "Average Score"
      },
      "color": {
        "field": "genre",
        "type": "nominal",
        "title": "Genre",
        "legend": {"title": "Genre"}
      },
      "tooltip": [
        {"field": "title", "type": "nominal", "title": "Title"},
        {"field": "ranked", "type": "quantitative", "title": "Ranking"},
        {"field": "score", "type": "quantitative", "title": "Score"},
        {"field": "genre", "type": "nominal", "title": "Genre"}
      ]
    },
    "config": {
      "axis": {
        "labelFont": "Arial",
        "titleFont": "Arial",
        "labelFontSize": 12,
        "titleFontSize": 14
      },
      "title": {
        "font": "Arial",
        "fontSize": 16,
        "fontWeight": "bold"
      }
    },
    "layer": [
      {
        "mark": "point"
      },
      {
        "mark": {
          "type": "text",
          "align": "left",
          "dx": 5,
          "dy": -5
        },
        "encoding": {
          "text": {"field": "title", "type": "nominal"}
        }
      }
    ]
  }
  
//   {
//   "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
//   "width": 800,
//   "height": 600,
//   "title": "Anime Ratings",
//   "data": {
//     "url": "https://raw.githubusercontent.com/FIT3179/Vega-Lite/main/4_interactive_scatter_plot/data/COVID_19_10_Oct_2020.csv"
//   },
//   "params": [
//     {
//       "name": "Population_Above",
//       "value": 0,
//       "bind": {
//         "input": "range",
//         "min": 0,
//         "max": 100000000,
//         "step": 1000000,
//         "name": "Minimum Rank: "
//       }
//     },
//     {
//       "name": "Continent_selection",
//       "bind": {
//         "input": "select",
//         "options": [
//           null,
//           "North America",
//           "South America",
//           "Europe",
//           "Africa",
//           "Asia",
//           "Oceania"
//         ],
//         "labels": [
//           "Show All",
//           "Shonen",
//           "Isekai",
//           "Slice of Life",
//           "Fantasy",
//           "Comedy",
//           "Romance"
//         ],
//         "name": "Genre : "
//       }
//     }
//   ],
//   "transform": [
//     {"filter": "datum.Active > 0"},
//     {"filter": "datum.Deaths > 0"},
//     {"filter": "datum.Population > Population_Above"},
//     {
//       "filter": "Continent_selection == null || datum.Continent == Continent_selection"
//     },
//     {
//       "calculate": "datum.Confirmed/datum.Population * 10000",
//       "as": "Cases per 10,000 Population"
//     }
//   ],
//   "encoding": {
//     "x": {
//       "field": "Confirmed",
//       "type": "quantitative",
//       "title": "Confirmed Cases",
//       "axis": {"tickCount": 7},
//       "scale": {"type": "log", "domain": [1, 10000000]}
//     },
//     "y": {
//       "field": "Deaths",
//       "type": "quantitative",
//       "axis": {"tickCount": 6},
//       "scale": {"type": "log", "domain": [1, 1000000]}
//     }
//   },
//   "layer": [
//     {
//       "mark": "circle",
//       "encoding": {
//         "size": {
//           "field": "Population",
//           "type": "quantitative",
//           "scale": {
//             "type": "threshold",
//             "domain": [1000000, 10000000, 50000000, 100000000, 500000000],
//             "range": [10, 50, 150, 200, 300, 400]
//           },
//           "legend": {"format": ".1s"}
//         },
//         "color": {
//           "field": "Continent",
//           "type": "nominal",
//           "scale": {
//             "domain": [
//               "North America",
//               "South America",
//               "Europe",
//               "Africa",
//               "Asia",
//               "Oceania"
//             ],
//             "range": [
//               "#e41a1c",
//               "#984ea3",
//               "#ff7f00",
//               "#a6cee3",
//               "#377eb8",
//               "#a65628"
//             ]
//           }
//         },
//         "opacity": {"value": 0.6},
//         "tooltip": [
//           {"field": "Country", "type": "nominal"},
//           {"field": "Confirmed", "type": "quantitative", "format": ","},
//           {"field": "Active", "type": "quantitative", "format": ","},
//           {"field": "Deaths", "type": "quantitative", "format": ","},
//           {"field": "Recovered", "type": "quantitative", "format": ","},
//           {
//             "field": "Cases per 10,000 Population",
//             "type": "quantitative",
//             "format": ".2f"
//           }
//         ]
//       }
//     },
//     {
//       "mark": {
//         "type": "text",
//         "align": "right",
//         "baseline": "middle",
//         "dx": -12,
//         "fontSize": 11.5,
//         "fontStyle": "italic"
//       },
//       "encoding": {
//         "text": {"field": "Country", "type": "nominal"},
//         "color": {"value": "black"},
//         "opacity": {
//           "condition": {
//             "test": "datum['Country'] == 'China' || datum['Country'] == 'Singapore' || datum['Country'] == 'Australia' || datum['Country'] == 'New Zealand' || datum['Country'] == 'Italy' || datum['Country'] == 'Yemen' ||  datum['Country'] == 'United States'",
//             "value": 1
//           },
//           "value": 0
//         },
//         "tooltip": [
//           {"field": "Country", "type": "nominal"},
//           {"field": "Confirmed", "type": "quantitative", "format": ","},
//           {"field": "Active", "type": "quantitative", "format": ","},
//           {"field": "Deaths", "type": "quantitative", "format": ","},
//           {"field": "Recovered", "type": "quantitative", "format": ","},
//           {
//             "field": "Cases per 10,000 Population",
//             "type": "quantitative",
//             "format": ".2f"
//           }
//         ]
//       }
//     }
//   ]
// };
  vegaEmbed('#scatter_plot', spec2).then(function(result) {
    // Access the Vega view instance (https://vega.github.io/vega/docs/api/view/) as result.view
  }).catch(console.error);
</script>

</body>
</html>
